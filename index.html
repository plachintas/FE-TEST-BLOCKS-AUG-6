<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <!--
    Use only pure Javascript (no jQuery etc.).
    On load:
    1). Create square div containerSize * containerSize size.
    2). Create inside it numberOfChildren square divs which:
        - do no overlap each other
        - are fully contained within the container div
        - has size childSize * childSize
        - has random background color
        - when you hover it longer than 3 seconds it disappears
    -->
    <script>
        var getRandomColor = function () {
            function c() {
                return Math.floor(Math.random() * 256).toString(16);
            }
            return ("#" + c() + c() + c() + c()).substr(0, 7);
        };

        var checkParams = function (containerSize, childSize, numberOfChildren) {
            var maxNumberOfChildren = (containerSize * containerSize) / (childSize * childSize);

            if (isNaN(containerSize) || isNaN(childSize) || isNaN(numberOfChildren)) {
                console.error('some of params are NaN');
                return false;
            } else if (childSize > containerSize) {
                console.error('childSize cannot be bigger containerSize');
                return false;
            } else if (numberOfChildren > maxNumberOfChildren) {
                console.warn('numberOfChildren is bigger then container can fit');
            }

            return true;
        };

        var createContainerDiv = function (containerSize) {
            var containerDiv = document.querySelector('#container');
            if (containerDiv) {
                containerDiv.innerHTML = '';
                containerDiv.style.width = containerSize + 'px';
                containerDiv.style.height = containerSize + 'px';
            } else {
                containerDiv = document.createElement('div');
                containerDiv.id = 'container';
                containerDiv.style.backgroundColor = 'black';
                containerDiv.style.width = containerSize + 'px';
                containerDiv.style.height = containerSize + 'px';
                containerDiv.style.lineHeight = 0;

                containerDiv.addEventListener('mouseover', handleContainerMouseOver);
                containerDiv.addEventListener('mouseout', handleContainerMouseOut);
            }

            return containerDiv;
        };

        var removeTimer;
        var handleContainerMouseOver = function (e) {
            var el = e.target;

            removeTimer = setTimeout(function () {
                el.parentNode.removeChild(el);
            }, 3000)
        };
        var handleContainerMouseOut = function () {
            clearTimeout(removeTimer);
        };

        var createChildEl = function (childSize) {
            var childEl = document.createElement('span');
            childEl.style.display = 'inline-block';
            childEl.style.backgroundColor = getRandomColor();
            childEl.style.width = childSize + 'px';
            childEl.style.height = childSize + 'px';

            return childEl;
        };

        var onLoadCallback = function(containerSize, childSize, numberOfChildren) {
            containerSize = parseInt(containerSize, 10);
            childSize = parseInt(childSize, 10);
            numberOfChildren = parseInt(numberOfChildren, 10);

            if (!checkParams(containerSize, childSize, numberOfChildren)) return;

            // create container div
            var containerDiv = createContainerDiv(containerSize);

            // create child divs
            var maxNumberOfChildren = (containerSize * containerSize) / (childSize * childSize);
            for (var n = 0; n < numberOfChildren && n < maxNumberOfChildren; n++) {
                containerDiv.appendChild( createChildEl(childSize) );
            }

            // append results to body
            document.body.appendChild(containerDiv);
        };

        document.addEventListener('DOMContentLoaded', function () {   
            onLoadCallback(200, 50, 17);
        });
    </script>
</head>
<body>
    <!-- Do not put here anything. All DOM must be generated by JS-->
</body>
</html>
